{"version":3,"file":"button.js","sourceRoot":"","sources":["button.ts"],"names":[],"mappings":"AAAA;;;;GAIG;;;AAEH,OAAO,2BAA2B,CAAC;AACnC,OAAO,wBAAwB,CAAC;AAEhC,OAAO,EAAC,IAAI,EAAE,QAAQ,EAAE,UAAU,EAAE,OAAO,EAAiB,MAAM,KAAK,CAAC;AACxE,OAAO,EAAC,QAAQ,EAAE,KAAK,EAAE,qBAAqB,EAAC,MAAM,mBAAmB,CAAC;AACzE,OAAO,EAAC,QAAQ,EAAC,MAAM,6BAA6B,CAAC;AACrD,OAAO,EAAC,IAAI,IAAI,UAAU,EAAE,OAAO,EAAC,MAAM,oBAAoB,CAAC;AAG/D,OAAO,EAAC,yBAAyB,EAAC,MAAM,iCAAiC,CAAC;AAC1E,OAAO,EAAC,uBAAuB,EAAE,iBAAiB,EAAE,eAAe,EAAC,MAAM,qCAAqC,CAAC;AAEhH;;GAEG;AACH,MAAM,OAAgB,MAAO,SAAQ,UAAU;IAK7C,kBAAkB;IAClB,MAAM,KAAK,cAAc;QACvB,OAAO,IAAI,CAAC;IACd,CAAC;IA4DD;QACE,KAAK,EAAE,CAAC;QAvDV;;WAEG;QACuC,aAAQ,GAAG,KAAK,CAAC;QAa3D;;;;;WAKG;QACmD,iBAAY,GAAG,KAAK,CAAC;QAE3E;;WAEG;QACwB,YAAO,GAAG,KAAK,CAAC;QAE3C;;;;WAIG;QACwB,wBAAmB,GAAG,KAAK,CAAC;QAEvD;;;;WAIG;QACS,SAAI,GAAwB,EAAE,CAAC;QAO1B,cAAS,GACrB,IAAmB,CAAC,wBAAyB,CAAC,eAAe,EAAE,CAAC;QAErE,+CAA+C;QACvC,yBAAoB,GAAG,KAAK,CAAC;QAmEpB,0BAAqB,GAAG,CAAC,KAAiB,EAAE,EAAE;YAC7D,IAAI,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;gBACtD,OAAO;aACR;YACD,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,uBAAuB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC;QArEA,IAAI,CAAC,QAAQ,EAAE;YACb,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;SAC5D;IACH,CAAC;IAEQ,KAAK;QACZ,IAAI,CAAC,aAAa,EAAE,KAAK,EAAE,CAAC;IAC9B,CAAC;IAEQ,IAAI;QACX,IAAI,CAAC,aAAa,EAAE,IAAI,EAAE,CAAC;IAC7B,CAAC;IAEkB,MAAM;QACvB,mCAAmC;QACnC,MAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QAE/C,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAA,GAAG,CAAC,CAAC,CAAC,OAAO,CAAA,QAAQ,CAAC;QACxD,iCAAiC;QACjC,MAAM,EAAC,SAAS,EAAE,YAAY,EAAE,YAAY,EAAC,GAAG,IAAuB,CAAC;QACxE,OAAO,UAAU,CAAA;SACZ,MAAM;4BACa,QAAQ,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;oBACzC,UAAU;sBACR,SAAS,IAAI,OAAO;yBACjB,YAAY,IAAI,OAAO;yBACvB,YAAY,IAAI,OAAO;eACjC,IAAI,CAAC,IAAI,IAAI,OAAO;iBAClB,IAAI,CAAC,MAAM,IAAI,OAAO;kBACrB,IAAI,CAAC,WAAW;;UAExB,IAAI,CAAC,eAAe,EAAE;UACtB,IAAI,CAAC,eAAe,EAAE;UACtB,IAAI,CAAC,YAAY,EAAE;UACnB,IAAI,CAAC,aAAa,EAAE;UACpB,IAAI,CAAC,iBAAiB,EAAE;UACxB,IAAI,CAAC,iBAAiB,EAAE;UACxB,IAAI,CAAC,WAAW,EAAE;UAClB,IAAI,CAAC,kBAAkB,EAAE;UACzB,MAAM,GAAG,CAAC;IAClB,CAAC;IAES,gBAAgB;QACxB,OAAO;YACL,0BAA0B,EAAE,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,OAAO;YAC9D,2BAA2B,EAAE,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,OAAO;SAC/D,CAAC;IACJ,CAAC;IAES,eAAe;QACvB,OAAO,OAAO,CAAC;IACjB,CAAC;IAES,aAAa;QACrB,OAAO,OAAO,CAAC;IACjB,CAAC;IAEO,iBAAiB;QACvB,OAAO,IAAI,CAAA;;KAEV,CAAC;IACJ,CAAC;IAUO,YAAY;QAClB,OAAO,IAAI,CAAA,oDACP,IAAI,CAAC,QAAQ,gBAAgB,CAAC;IACpC,CAAC;IAEO,eAAe;QACrB,OAAO,IAAI,CAAA,iCAAiC,CAAC;IAC/C,CAAC;IAEO,WAAW;QACjB,OAAO,IAAI,CAAA,sDAAsD,CAAC;IACpE,CAAC;IAEO,iBAAiB;QACvB,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;IACzD,CAAC;IAEO,kBAAkB;QACxB,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC;IACzD,CAAC;IAEO,UAAU;QAChB,OAAO,IAAI,CAAA,kCACP,IAAI,CAAC,gBAAgB,WAAW,CAAC;IACvC,CAAC;IAEO,WAAW,CAAC,CAAa;QAC/B,IAAI,IAAI,CAAC,oBAAoB,EAAE;YAC7B,OAAO;SACR;QACD,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5B,CAAC,CAAC,cAAc,EAAE,CAAC;SACpB;QACD,sCAAsC;QACtC,MAAM,EAAC,IAAI,EAAE,SAAS,EAAE,EAAC,IAAI,EAAC,EAAC,GAAG,IAAI,CAAC;QACvC,IAAI,CAAC,IAAI,EAAE;YACT,OAAO;SACR;QACD,MAAM,QAAQ,GAAG,IAAI,KAAK,QAAQ,EAAE,OAAO,GAAG,IAAI,KAAK,OAAO,CAAC;QAC/D,IAAI,CAAC,CAAC,QAAQ,IAAI,OAAO,CAAC,EAAE;YAC1B,OAAO;SACR;QACD,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACjC,MAAM,SAAS,GAAG,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QAC5C,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;QAClC,IAAI,SAAS,EAAE;YACb,OAAO;SACR;QACD,IAAI,QAAQ,EAAE;YACZ,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;aAAM,IAAI,OAAO,EAAE;YAClB,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;IACH,CAAC;IAEO,gBAAgB;QACtB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC;IAC/C,CAAC;;;AAtMD;IACE,yBAAyB,CAAC,EAAI,CAAC,CAAC;AAClC,CAAC,GAAA,CAAA;AAOD,kBAAkB;AACF,wBAAiB,GACZ,EAAC,IAAI,EAAE,MAAM,EAAE,cAAc,EAAE,IAAI,EAAC,CAAC;AAKhB;IAAzC,QAAQ,CAAC,EAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAC,CAAC;wCAAkB;AAK/C;IAAX,QAAQ,EAAE;oCAAe;AAMd;IAAX,QAAQ,EAAE;sCAAiB;AAQ0B;IAArD,QAAQ,CAAC,EAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,cAAc,EAAC,CAAC;4CAAsB;AAKhD;IAA1B,QAAQ,CAAC,EAAC,IAAI,EAAE,OAAO,EAAC,CAAC;uCAAiB;AAOhB;IAA1B,QAAQ,CAAC,EAAC,IAAI,EAAE,OAAO,EAAC,CAAC;mDAA6B;AAO3C;IAAX,QAAQ,EAAE;oCAAgC;AAErB;IAArB,KAAK,CAAC,aAAa,CAAC;6CAAmD;AAGxE;IADC,qBAAqB,CAAC,EAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAC,CAAC;6CACN","sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport '../../focus/focus-ring.js';\nimport '../../ripple/ripple.js';\n\nimport {html, isServer, LitElement, nothing, TemplateResult} from 'lit';\nimport {property, query, queryAssignedElements} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {html as staticHtml, literal} from 'lit/static-html.js';\n\nimport {ARIAMixinStrict} from '../../internal/aria/aria.js';\nimport {requestUpdateOnAriaChange} from '../../internal/aria/delegate.js';\nimport {dispatchActivationClick, isActivationClick, redispatchEvent} from '../../internal/controller/events.js';\n\n/**\n * A button component.\n */\nexport abstract class Button extends LitElement {\n  static {\n    requestUpdateOnAriaChange(this);\n  }\n\n  /** @nocollapse */\n  static get formAssociated() {\n    return true;\n  }\n\n  /** @nocollapse */\n  static override shadowRootOptions:\n      ShadowRootInit = {mode: 'open', delegatesFocus: true};\n\n  /**\n   * Whether or not the button is disabled.\n   */\n  @property({type: Boolean, reflect: true}) disabled = false;\n\n  /**\n   * The URL that the link button points to.\n   */\n  @property() href?: string;\n\n  /**\n   * Where to display the linked `href` URL for a link button. Common options\n   * include `_blank` to open in a new tab.\n   */\n  @property() target?: string;\n\n  /**\n   * Whether to render the icon at the inline end of the label rather than the\n   * inline start.\n   *\n   * _Note:_ Link buttons cannot have trailing icons.\n   */\n  @property({type: Boolean, attribute: 'trailingicon'}) trailingIcon = false;\n\n  /**\n   * Whether to display the icon or not.\n   */\n  @property({type: Boolean}) hasIcon = false;\n\n  /**\n   * Whether `preventDefault()` should be called on the underlying button.\n   * Useful for preventing certain native functionalities like preventing form\n   * submissions.\n   */\n  @property({type: Boolean}) preventClickDefault = false;\n\n  /**\n   * Specifies the type of button, used for controlling forms. When type\n   * is `submit`, the containing form is submitted; when it is `reset` the\n   * form is reset.\n   */\n  @property() type: ''|'submit'|'reset' = '';\n\n  @query('.md3-button') private readonly buttonElement!: HTMLElement|null;\n\n  @queryAssignedElements({slot: 'icon', flatten: true})\n  private readonly assignedIcons!: HTMLElement[];\n\n  private readonly internals =\n      (this as HTMLElement /* needed for closure */).attachInternals();\n\n  // flag to avoid processing redispatched event.\n  private isRedispatchingEvent = false;\n\n  constructor() {\n    super();\n    if (!isServer) {\n      this.addEventListener('click', this.handleActivationClick);\n    }\n  }\n\n  override focus() {\n    this.buttonElement?.focus();\n  }\n\n  override blur() {\n    this.buttonElement?.blur();\n  }\n\n  protected override render() {\n    // Link buttons may not be disabled\n    const isDisabled = this.disabled && !this.href;\n\n    const button = this.href ? literal`a` : literal`button`;\n    // Needed for closure conformance\n    const {ariaLabel, ariaHasPopup, ariaExpanded} = this as ARIAMixinStrict;\n    return staticHtml`\n      <${button}\n        class=\"md3-button ${classMap(this.getRenderClasses())}\"\n        ?disabled=${isDisabled}\n        aria-label=\"${ariaLabel || nothing}\"\n        aria-haspopup=\"${ariaHasPopup || nothing}\"\n        aria-expanded=\"${ariaExpanded || nothing}\"\n        href=${this.href || nothing}\n        target=${this.target || nothing}\n        @click=\"${this.handleClick}\"\n      >\n        ${this.renderFocusRing()}\n        ${this.renderElevation()}\n        ${this.renderRipple()}\n        ${this.renderOutline()}\n        ${this.renderTouchTarget()}\n        ${this.renderLeadingIcon()}\n        ${this.renderLabel()}\n        ${this.renderTrailingIcon()}\n      </${button}>`;\n  }\n\n  protected getRenderClasses() {\n    return {\n      'md3-button--icon-leading': !this.trailingIcon && this.hasIcon,\n      'md3-button--icon-trailing': this.trailingIcon && this.hasIcon,\n    };\n  }\n\n  protected renderElevation(): TemplateResult|typeof nothing {\n    return nothing;\n  }\n\n  protected renderOutline(): TemplateResult|typeof nothing {\n    return nothing;\n  }\n\n  private renderTouchTarget() {\n    return html`\n      <span class=\"md3-button__touch\"></span>\n    `;\n  }\n\n  private readonly handleActivationClick = (event: MouseEvent) => {\n    if (!isActivationClick((event)) || !this.buttonElement) {\n      return;\n    }\n    this.focus();\n    dispatchActivationClick(this.buttonElement);\n  };\n\n  private renderRipple() {\n    return html`<md-ripple class=\"md3-button__ripple\" ?disabled=\"${\n        this.disabled}\"></md-ripple>`;\n  }\n\n  private renderFocusRing() {\n    return html`<md-focus-ring></md-focus-ring>`;\n  }\n\n  private renderLabel() {\n    return html`<span class=\"md3-button__label\"><slot></slot></span>`;\n  }\n\n  private renderLeadingIcon() {\n    return this.trailingIcon ? nothing : this.renderIcon();\n  }\n\n  private renderTrailingIcon() {\n    return this.trailingIcon ? this.renderIcon() : nothing;\n  }\n\n  private renderIcon() {\n    return html`<slot name=\"icon\" @slotchange=\"${\n        this.handleSlotChange}\"></slot>`;\n  }\n\n  private handleClick(e: MouseEvent) {\n    if (this.isRedispatchingEvent) {\n      return;\n    }\n    if (this.preventClickDefault) {\n      e.preventDefault();\n    }\n    // based on type, trigger form action.\n    const {type, internals: {form}} = this;\n    if (!form) {\n      return;\n    }\n    const isSubmit = type === 'submit', isReset = type === 'reset';\n    if (!(isSubmit || isReset)) {\n      return;\n    }\n    e.stopPropagation();\n    this.isRedispatchingEvent = true;\n    const prevented = !redispatchEvent(this, e);\n    this.isRedispatchingEvent = false;\n    if (prevented) {\n      return;\n    }\n    if (isSubmit) {\n      form.requestSubmit();\n    } else if (isReset) {\n      form.reset();\n    }\n  }\n\n  private handleSlotChange() {\n    this.hasIcon = this.assignedIcons.length > 0;\n  }\n}\n"]}